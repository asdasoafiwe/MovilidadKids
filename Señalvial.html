<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Portal Infantil | Zonas Escolares</title>
  <link rel="stylesheet" href="Moviparque.css" />
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    html, body { height:100%; margin:0; padding:0; }
    body { display:flex; flex-direction:column; font-family:Arial, sans-serif; }
    main { flex:1; }
    * { box-sizing:border-box; }

    .navbar { display:flex; align-items:center; background:#fff; padding:10px 20px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
    .logo { height:50px; margin-right:15px; }
    .titulo { font-size:1.2rem; font-weight:bold; flex-grow:1; }
    .menu { list-style:none; display:flex; gap:15px; }
    .menu li a { text-decoration:none; color:#333; padding:5px 10px; }
    .menu li a.activo { background:#ffd700; border-radius:4px; }

    .hero { display:flex; align-items:center; justify-content:center;
             background:url('https://i.postimg.cc/MGxJyfTc/Rectangle-35.png') center/cover;
             padding:60px 30px; flex-wrap:wrap; }
    .abeja { height:500px; margin-right:25px; animation:flotar 3s ease-in-out infinite; }
    @keyframes flotar { 0%{transform:translateY(0);}50%{transform:translateY(-10px);}100%{transform:translateY(0);} }
    .hero-text { padding:25px; border-radius:8px; max-width:600px; }
    .hero-text h2 { margin-bottom:15px; font-size:3rem; color:#b5c557; }
    .hero-text p { font-size:1.5rem; color:#333; }

    #zonas { background:#5a5d3d; padding:20px 0; }
    .zonas-header { text-align:center; padding:20px; }
    .zonas-header h2 { color:#fff; font-size:2.5rem; }
    .zonas-container { display:flex; overflow-x:auto; gap:30px; padding:40px 20px; justify-content:center; }
    .zona-box { width:400px; height:400px; display:flex; align-items:center; justify-content:center; border-radius:12px; }
    .zona-box img { width:90%; }

    /* sección JUGUEMOS */
    #juguemos { background:url('https://i.postimg.cc/MGxJyfTc/Rectangle-35.png') center/cover; padding:60px 30px; text-align:center; }
    #juguemos h2 { font-size:2.5rem; margin-bottom:20px; }

    /* contenedor relativo para canvas y overlays */
    .game-container { position:relative; width:1000px; max-width:100%; margin:0 auto; }
    #gameCanvas { width:100%; height:400px; border:3px dashed #ccc; border-radius:12px; background:rgba(255,255,255,0.8); display:block; }

    /* start screen dentro del game-container */
    #startScreen, #gameOver {
      position:absolute; top:0; left:0; width:100%; height:100%;
      display:flex; align-items:center; justify-content:center; z-index:10;
    }
    #startScreen { background:transparent; cursor:pointer; }
    #startScreen img { width:100%; height:100%; object-fit:contain; }

    /* game over overlay */
    #gameOver { background:rgba(0,0,0,0.7); flex-direction:column; color:#fff; display:none; }
    #gameOver h2 { font-size:3rem; margin-bottom:20px; }
    #gameOver p { font-size:1.5rem; margin-bottom:20px; }
    #gameOver button { padding:12px 24px; font-size:1.3rem; border:none; border-radius:5px; cursor:pointer; background:#ffd700; color:#333; }

    #publicidad img { width:100%; display:block; }

    .banner-final { display:flex; flex-wrap:wrap; background:#b5c557; color:#fff; padding:20px; gap:20px; }
    .banner-final .cuadros { flex:1 1 200px; }
    .banner-final h3 { margin-bottom:5px; font-size:1.2rem; }
    .banner-final .linea { width:50px; height:3px; background:#fff; margin:5px 0; }
    .banner-final p { font-size:0.9rem; margin:5px 0; }

    @media (max-width:768px) {
      .hero { flex-direction:column; padding:30px 20px; }
      .abeja { height:300px; margin-bottom:20px; }
      .hero-text { text-align:center; }
      .game-container { width:100%; }
      #gameCanvas { height:250px; }
      #startScreen img { object-fit:cover; }
    }
  </style>
</head>
<body>
  <header>
    <nav class="navbar">
      <img src="https://i.postimg.cc/wTM40Hx0/encabezadoo.png" alt="Logo" class="logo"/>
      <span class="titulo">Portal Infantil | Secretaría Distrital de Movilidad</span>
      <ul class="menu">
        <li><a href="index.html">Inicio</a></li>
        <li><a href="Moviparque.html">Moviparque</a></li>
        <li><a href="Zonaescolar.html">Zonas escolares</a></li>
        <li><a href="Señalvial.html" class="activo">Señales viales</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero">
      <img src="https://i.postimg.cc/595fZjSx/ABEJA-2.png" alt="Abeja" class="abeja"/>
      <div class="hero-text">
        <h2>SEÑALES VIALES</h2>
        <p>Las señales de tránsito nos dicen cuándo parar, avanzar o tener cuidado, ¡como si fueran las reglas de un gran juego!<br>
        En Bogotá, la Secretaría Distrital de Transporte coloca y cuida estas señales para que todos se muevan sin peligro.</p>
      </div>
    </section>

    <section id="zonas">
      <div class="zonas-header"><h2>TIPOS DE SEÑALES VIALES</h2></div>
      <div class="zonas-container">
        <div class="zona-box"><img src="https://i.postimg.cc/sXVgnyb7/peatones.png" alt="Señal 1"/></div>
        <div class="zona-box"><img src="https://i.postimg.cc/9fPftzgc/2cicloruta.png" alt="Señal 2"/></div>
        <div class="zona-box"><img src="https://i.postimg.cc/d07qXB4X/Group-98.png" alt="Señal 3"/></div>
        <div class="zona-box"><img src="https://i.postimg.cc/Z5dnnwrB/4-vaina.png" alt="Señal 4"/></div>
      </div>
    </section>

    <section id="juguemos">
      <h2>¡Juguemos y Aprendamos!</h2>
      <div class="game-container">
        <div id="startScreen">
          <img src="https://i.postimg.cc/KcwQjGdJ/Screenshot-from-2025-04-29-07-42-25.png" alt="Pulsa para iniciar"/>
        </div>
        <canvas id="gameCanvas"></canvas>
        <div id="gameOver">
          <h2>Game Over</h2>
          <p id="finalScore">Puntuación: 0</p>
          <button id="retryBtn">Reintentar</button>
        </div>
      </div>
    </section>

    <section id="publicidad">
      <img src="https://i.postimg.cc/Kzn42GDX/publicidad.png" alt="Publicidad"/>
    </section>
  </main>

  <footer class="banner-final">
    <div class="cuadros">
      <h3>SECRETARÍA DE MOVILIDAD</h3>
      <div class="linea linea-larga"></div>
      <p>NIT 899.999.061-9</p>
      <p>Contacto: +57 (601) 364 9400 opción 2</p>
    </div>
    <div class="cuadros">
      <h3>INFORMACIÓN SDM</h3>
      <div class="linea"></div>
      <p>Acerca de nosotros</p>
      <p>Política de privacidad</p>
    </div>
    <div class="cuadros">
      <h3>SERVICIOS</h3>
      <div class="linea"></div>
      <p>Trámites y Servicios</p>
      <p>Consulta de Comparendos</p>
    </div>
    <div class="cuadros">
      <h3>SÍGANOS</h3>
      <div class="linea"></div>
      <img src="https://i.postimg.cc/c40RCnHv/Group-114.png" alt="Redes sociales" class="img-redes"/>
    </div>
  </footer>

  <script>
    (function(){
      const canvas = document.getElementById('gameCanvas');
      const ctx = canvas.getContext('2d');
      canvas.width = canvas.clientWidth;
      canvas.height = canvas.clientHeight;

      const gameOverDiv = document.getElementById('gameOver');
      const finalScoreP = document.getElementById('finalScore');
      const retryBtn = document.getElementById('retryBtn');
      const startScreen = document.getElementById('startScreen');

      const assets = [
        {name:'bg', src:'https://i.postimg.cc/wvpJZJqX/escenario.png'},
        {name:'car', src:'https://i.postimg.cc/sgMphsHh/personajes.png'},
        {name:'s30', src:'https://i.postimg.cc/Hss0TQQ3/30-km.png'},
        {name:'s50', src:'https://i.postimg.cc/nV1Y8dQC/50-km.png'},
        {name:'stop',src:'https://i.postimg.cc/7631Z9st/stop.png'}
      ];
      const loaded = {};
      let count = 0;
      assets.forEach(a=>{
        const img = new Image();
        img.src = a.src;
        img.onload = ()=>{ loaded[a.name]=img; count++; };
      });

      let lane=0, mileage=40, offset=0, isGameOver=false, score=0;
      const lanes=2, spacing=1200;
      let signs=[];

      function initSigns(){
        signs = [
          {img:loaded.s30, limit:30},
          {img:loaded.s50, limit:50},
          {img:loaded.stop, limit:0, isStop:true}
        ].map((t,i)=>({...t, x:canvas.width+i*spacing, passed:false, appeared:false, stopped:false}));
      }
      initSigns();

      window.addEventListener('keydown', e=>{
        if(isGameOver) return;
        const k=e.key.toLowerCase();
        if(k==='w') lane=Math.max(0,lane-1);
        if(k==='s') lane=Math.min(lanes-1,lane+1);
        if(k==='d') mileage=Math.min(100,mileage+10);
        if(k==='a') mileage=Math.max(0,mileage-10);
        if(e.code==='Space') mileage=0;
      });

      retryBtn.addEventListener('click', ()=>{
        isGameOver=false; score=0; lane=0; mileage=40; offset=0;
        initSigns();
        gameOverDiv.style.display='none';
        requestAnimationFrame(loop);
      });

      startScreen.addEventListener('click', ()=>{
        startScreen.style.display='none';
        requestAnimationFrame(loop);
      });

      function loop(){
        if(isGameOver) return;
        const speed = mileage/20;
        const bg = loaded.bg;
        const scale = canvas.height/bg.naturalHeight;
        const w = bg.naturalWidth*scale;
        ctx.clearRect(0,0,canvas.width,canvas.height);
        offset = offset-speed <= -w ? 0 : offset-speed;
        ctx.drawImage(bg, offset,0, w, canvas.height);
        ctx.drawImage(bg, offset+w,0, w, canvas.height);

        const top = canvas.height*0.25;
        const h = (canvas.height-top)/lanes;
        ctx.setLineDash([10,10]); ctx.lineWidth=2;
        for(let i=1;i<lanes;i++){
          const y=top+i*h;
          ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(canvas.width,y); ctx.stroke();
        }
        ctx.setLineDash([]);

        const cx = canvas.width*0.2;
        signs.forEach(s=>{
          s.x -= speed;
          const sw=s.img.width*0.3, sh=s.img.height*0.3, sy=top+(h-sh)/2;
          ctx.drawImage(s.img, s.x, sy, sw, sh);
          if(!s.appeared && s.x+sw<canvas.width) s.appeared=true;
          if(s.appeared && mileage===0) s.stopped=true;
          if(!s.passed && s.x+sw<cx){
            s.passed=true;
            if(s.isStop ? s.stopped : mileage<=s.limit) score++;
            else return gameOver();
          }
        });

        if(signs[0].x + signs[0].img.width*0.3 < 0){
          const s=signs.shift();
          s.x=signs[signs.length-1].x+spacing;
          s.passed=s.appeared=s.stopped=false;
          signs.push(s);
        }

        const carImg = loaded.car;
        const ch = canvas.height*0.5;
        const cw = ch*(carImg.naturalWidth/carImg.naturalHeight);
        const cy = top+lane*h+(h-ch)/2;
        ctx.drawImage(carImg, 0,0,carImg.naturalWidth,carImg.naturalHeight, cx,cy,cw,ch);

        ctx.font='20px Arial'; ctx.fillStyle='#000';
        ctx.fillText(`Kilometraje: ${mileage} km`,10,25);
        ctx.fillText(`Puntuación: ${score}`,10,50);

        requestAnimationFrame(loop);
      }

      function gameOver(){
        isGameOver=true;
        finalScoreP.textContent=`Puntuación: ${score}`;
        gameOverDiv.style.display='flex';
      }
    })();
  </script>
</body>
</html>
